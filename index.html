<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rust Alert</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white font-sans">
  <header class="p-4 bg-gray-800 shadow-md">
    <h1 class="text-3xl font-bold text-orange-400">Rust Server Alerts</h1>
    <p class="text-sm text-gray-400">Datos actualizados autom√°ticamente (Facepunch oficiales)</p>
  </header>

  <main class="p-6 grid gap-6 md:grid-cols-2">
    <section class="bg-gray-800 p-4 rounded-xl shadow-xl">
      <h2 class="text-xl font-semibold text-orange-300 mb-2">üîî √öltimas alertas</h2>
      <ul class="list-disc pl-5 space-y-1">
        <li>Wipe completado hace 2 horas</li>
        <li>Reinicio programado a las 03:00</li>
        <li>Evento PvP en zona norte activo</li>
      </ul>
    </section>

    <section class="bg-gray-800 p-4 rounded-xl shadow-xl">
      <h2 class="text-xl font-semibold text-orange-300 mb-2">üñ•Ô∏è Servidores Facepunch</h2>
      <table class="w-full text-sm">
        <thead>
          <tr class="text-gray-300 border-b border-gray-600">
            <th class="text-left py-2">Nombre</th>
            <th class="text-left">Jugadores</th>
            <th class="text-left">Estado</th>
          </tr>
        </thead>
        <tbody id="servers" class="text-white">
          <tr><td colspan="3">Cargando servidores...</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <script>
    const proxy = "https://corsproxy.io/?";
    const url = "https://api.battlemetrics.com/servers?filter[game]=rust&filter[official]=true&page[size]=50";

    fetch(proxy + encodeURIComponent(url))
      .then(res => res.json())
      .then(data => {
        const serverTable = document.getElementById("servers");
        serverTable.innerHTML = "";

        data.data.forEach(server => {
          const name = server.attributes.name;
          const players = `${server.attributes.players}/${server.attributes.maxPlayers}`;
          const status = server.attributes.status === "online"
            ? '<span class="text-green-400">Online</span>'
            : '<span class="text-red-400">Offline</span>';

          const row = document.createElement("tr");
          row.innerHTML = `
            <td class="py-1">${name}</td>
            <td>${players}</td>
            <td>${status}</td>
          `;
          serverTable.appendChild(row);
        });
      })
      .catch(error => {
        console.error("Error al obtener servidores:", error);
        document.getElementById("servers").innerHTML = `
          <tr><td colspan="3">Error al cargar los servidores</td></tr>
        `;
      });
  </script>
</body>
</html>
